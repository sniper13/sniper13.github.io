<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>Sniper</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="description" content="Sniper game ,Shoot to Kill!">
    <meta name="keywords" content="Sniper, Game, Simple Game, Skull">
    <meta name="author" content="Milad Kh">
    <link rel="icon" href="images/sniper-icon.png" type="image/gif" sizes="16x16">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="stylesheet" href="css/main.css">
</head>

<body id="body">

    <nav class="topnav">

        <span id ="sidenavIcon" onclick="openNav()">&#9776; </span>
        <a href="#home" class="active">Home</a>
        <a href="#news">News</a>
        <a href="#contact">Contact</a>
        <a href="#fillforms" onclick="showAllFormTabs()">Fill Forms</a>

        <div id="fullscreen-box">
            <button id="fullscreen-extend" onclick="openFullscreen(this);">
                <img src="images/fullscreen-extend.png" alt="Fullscreen">
            </button>

            <button id="fullscreen-quit" onclick="closeFullscreen(this);">
                <img src="images/fullscreen-quit.png" alt="Exit Fullscreen">
            </button>
        </div>

    </nav>

    <aside id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="#" onclick="sidenavTask('about')">About</a>
        <a href="#" onclick="sidenavTask('setting')">Settings</a>
        <a href="#" onclick="sidenavTask('account')">Account</a>
        <a href="#" onclick="sidenavTask('contact')">Contact</a>
    </aside>

    <div id="modalContainer" class="modal">
    <!--    <form>  **************************************** -->
        <form id="regForm" class="animate">

            <h1 id="formTitle">Settings</h1>
            
    <!-- 1   ////////////////////////////////// -->
            <div class="tab account" id="id00">Login Info:
                <p><input placeholder="Username..." oninput="this.className = ''" name="uname"></p>
                <p><input placeholder="Password..." oninput="this.className = ''" name="pword" type="password"></p>
            </div>


    <!-- 2   ////////////////////////////////// -->
            <div class="tab account" id="id01">Contact Info:
                <p><input placeholder="E-mail..." oninput="this.className = ''" name="email"></p>
                <p><input placeholder="Phone..." oninput="this.className = ''" name="phone"></p>
            </div>


    <!-- 3   //////////////////////////////////  -->
            <div class="tab account" id="id03">Birthday:
                <p><input placeholder="mm" oninput="this.className = ''" name="nn"></p>
                <p><input placeholder="yyyy" oninput="this.className = ''" name="yyyy"></p>
            </div>

    <!--;;;;;;;;;;;;;;;;;;;;;;;; set background tab  ;;;;;;;;;;;;;;;;;;; -->
            <div class="tab setting">Background:
                <br />
                <div class="setting-container">
                    <div class="setting-container-divider"> <!-- this div reaches up to half the width of the screen. (for design) -->
                        <span class="in-form-words">Select Color: &nbsp; </span>
                        <input id="color-picker-input" type="color" name="favcolor" value="#f7f7f7" />
                        <button id="color-picker-button" type="button" onclick="changeColor(); return false;">&#10004; </button>
                    </div>
                </div>

                <div id="skulls-wrapper">
                    <div class="skulls">
                        <a href="#1"><img onclick="buildWallpaper(1)" src="skulls/skull1.png" alt="s1"></a>
                        <a href="#2"><img onclick="buildWallpaper(2)" src="skulls/skull2.png" alt="s2"></a>
                        <a href="#3"><img onclick="buildWallpaper(3)" src="skulls/skull3.png" alt="s3"></a>
                    </div>

                    <div class="skulls">
                        <a href="#4"><img onclick="buildWallpaper(4)" src="skulls/skull4.png" alt="s4"></a>
                        <a href="#5"><img onclick="buildWallpaper(5)" src="skulls/skull5.png" alt="s5"></a>
                        <a href="#6"><img onclick="buildWallpaper(6)" src="skulls/skull6.png" alt="s6"></a>
                    </div>
                </div>

                <script>
                    function changeColor() {
                      let color = document.getElementById("color-picker-input").value;
                      let body = document.getElementById("body");
                      body.style.backgroundColor = color;
                     // return false;
                    }

                    function buildWallpaper(x) {
                      let body = document.getElementsByTagName("body")[0];
                      let wallpaperUrl = 'url('  +"'" + 'skulls/skull' + x + '.png' + "'"+ ')';
                      body.style.backgroundImage = wallpaperUrl;
                    }
                </script>

            </div>

    <!--;;;;;;;;;;;;;;;;;;;;;;;; set sound tab  ;;;;;;;;;;;;;;;;;;;; -->
            <div class="tab setting">Sound: 
                <br />
                <div class="setting-container">
                    <div class="setting-container-divider">
                        <div id="sound-preference">

                            <span class="in-form-words">Music </span> 
                            <label for="sound-music" class="switch">
                              <input id="sound-music" type="checkbox" name="sound" onclick="soundOnOff()" />
                              <span class="slider"></span>
                            </label>
                            <br /> <br />

                            <span class="in-form-words">Sound Effects </span> 
                            <label for="sound-effect" class="switch">
                              <input id="sound-effect" type="checkbox" checked="checked" name="sound" onclick="soundEffectsOnOff()" />
                              <span class="slider"></span>
                            </label>
                            <br /> <br />

                        </div>
                    </div>
                </div>

                <audio id="led" controls loop> <!-- autoplay -->
                    <source src="binary-files/LedZeppelin.mp3" type="audio/mpeg" />
                    Your browser does not support audio tag.
                </audio> 
                <br /> <br />

            </div>

            <script>
                const music = document.getElementById("led");
                function setInitialVolume() { 
                  music.volume = 0.3;
                }
                setInitialVolume();

                function soundOnOff(){
                  const sound = document.getElementById("sound-music");

                  if (sound.checked == false) {
                    music.muted = true;
                    music.autoplay = false;
                    music.pause();
                    music.currentTime = 0;
                  }else {
                    music.muted = false;
                    music.autoplay = true;
                    music.play();
                  }
                }
            </script>


    <!-- butts   ////////////////////////////////// -->    
            <div id="butt-container">  
        	
                <div>
                    <button type="button" id="prevBtn" onclick="nextPrev(-1)" class="next-buttons">&#10094;</button>
	            </div>

                <div>
                    <button type="button" id="startButton" onclick="start()">Start</button>
                </div>

                <div class="right">
                    <button type="button" id="nextBtn" onclick="nextPrev(1)" class="next-buttons">&#10095;</button>
	            </div>

            </div>
      
    <!-- Circles which indicates the steps of the form: -->
            <div id="steps">
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
                <span class="step"></span>
            </div>

        </form>    
    <!--    </form>   -->
    </div>

    <main>
        11111111111111111111111<br>222222222222222222<br>333333333333333333<br>44444444444444444
    </main>


<script>
////////////////////////////////////////////////////////////////////////////////
"use strict";
const regForm = document.getElementById("regForm");
regForm.style.display = 'none';
let theTab = "tab";
let currentTab = 0;

console.log("in the begginig..." + "\n  " + "the tab: " + theTab + "\n  " + "regForm.style.display: " + regForm.style.display);


// When the user clicks anywhere outside of the modal, close it!
const modal = document.getElementById('modalContainer');
window.onclick = function(event) {

  if (event.target == modal) {
    if (modal.style.display == "block") {
      modal.style.display = "none";
      regForm.style.display = "none";
      tabKind()[currentTab].style.display = "none";

      // for (tab = 0; tab < tabKind().length; tab++) {
      //   tabKind()[tab].style.display = "none";
      //}
    }
    currentTab = 0;
  }

  console.log("after clicking modal container..." + "\n  " + "the tab: " + theTab + "\n  " + "regForm.style.display: " + regForm.style.display);

}

function sidenavTask(task) {
  closeNav();
  theTab = task;
  let title = document.getElementById("formTitle");

  if (task == 'about') {
    alert("we are building a game!");
  }

  if (task == 'setting') {
    title.innerHTML = "Settings";
    showForm();
  }

  if (task == 'account') {
    title.innerHTML = "Account";
    showForm();
  }
}

function openNav() {
  document.getElementById("mySidenav").style.width = "250px";
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
}

function showAllFormTabs() {
  theTab = "tab";
  showForm()
}

function showForm() {
  if (regForm.style.display == "none") {
    regForm.style.display = "block";

    const modal = document.getElementById('modalContainer');
///    if (modal.style.display == "none") {
      modal.style.display = "block";
///    }

    let step = document.getElementsByClassName("step");
    for (let i = 0; i < tabKind().length; i++) {
      if (step[i].style.display == "none") {
        step[i].style.display = "block";
      }
    }
    for (let i = tabKind().length; i < 5; i++) {
      step[i].style.display = "none";
    }


  }else {
    regForm.style.display = "none";
  }
    showTab(currentTab);
}

function tabKind() {
  if (theTab == 'setting') {
    return document.getElementsByClassName("setting");
  }
  if (theTab == 'account') {
    return document.getElementsByClassName("account");
  }
  else {
    return document.getElementsByClassName("tab");
  }
}

function showTab(n) {

  let x = tabKind();
  let xid = x[n].id;

///  if (x[n].style.display == "none") {
    x[n].style.display = "block";
///  }
  //... and fix the Previous/Next buttons:
  if (n == 0) {
    document.getElementById("prevBtn").style.visibility = "hidden";
  } else {
    document.getElementById("prevBtn").style.visibility = "visible";
  }

  if (n == (x.length - 1)) {
    document.getElementById("nextBtn").style.visibility = "hidden";
  } else {
    document.getElementById("nextBtn").style.visibility = "visible";
  }

  fixStepIndicator(n)
}

function start() {
  alert("Start the game!");
}

function nextPrev(n) {
  let x = tabKind();

  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  currentTab = currentTab + n;
  // if you have reached the end of the form...
  if (currentTab >= x.length) {
    // ... the form gets submitted:
    currentTab = x.length - 1;
  }
  if (currentTab <= -1) {
    currentTab = 0;
  }

  showTab(currentTab);
}

function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  let i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class on the current step:
  x[n].className += " active";
}

// FULL SCREEN /////////////////////////////////////////////////////
var elem = document.documentElement;
function openFullscreen(butt) {
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.mozRequestFullScreen) { /* Firefox */
    elem.mozRequestFullScreen();
  } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE/Edge */
    elem.msRequestFullscreen();
  }

  butt.style.display = "none";
  document.getElementById("fullscreen-quit").style.display = "block";
}

function closeFullscreen(butt) {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  }

  butt.style.display = "none";
  document.getElementById("fullscreen-extend").style.display = "block";
}
</script>

</body>
</html>

